{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TakeQuiz(){const{id}=useParams();const[quiz,setQuiz]=useState(null);const[answers,setAnswers]=useState([]);const[score,setScore]=useState(null);useEffect(()=>{axios.get(\"http://localhost:5000/api/quizzes\").then(res=>{const q=res.data.find(x=>x.id===Number(id));if(q)setQuiz(q);});},[id]);const handleSubmit=async()=>{let localScore=0;quiz.data.questions.forEach((q,i)=>{if(answers[i]===q.correctIndex)localScore++;});setScore(localScore);await axios.post(\"http://localhost:5000/api/attempts\",{quizId:quiz.id,score:localScore});};if(!quiz)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading quiz...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:quiz.title}),quiz.data.questions.map((q,qi)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:q.question}),q.options.map((opt,oi)=>/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"q\".concat(qi),value:oi,checked:answers[qi]===oi,onChange:()=>{const copy=[...answers];copy[qi]=oi;setAnswers(copy);}}),opt]},oi))]},qi)),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Submit Quiz\"}),score!==null&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Your score: \",score,\" / \",quiz.data.questions.length]})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","jsx","_jsx","jsxs","_jsxs","TakeQuiz","id","quiz","setQuiz","answers","setAnswers","score","setScore","get","then","res","q","data","find","x","Number","handleSubmit","localScore","questions","forEach","i","correctIndex","post","quizId","children","title","map","qi","question","options","opt","oi","type","name","concat","value","checked","onChange","copy","onClick","length"],"sources":["C:/Users/milen/Desktop/PROGRAMMING/QuizMoodle/frontend/src/pages/TakeQuiz.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nexport default function TakeQuiz() {\r\n  const { id } = useParams();\r\n  const [quiz, setQuiz] = useState(null);\r\n  const [answers, setAnswers] = useState([]);\r\n  const [score, setScore] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axios.get(`http://localhost:5000/api/quizzes`).then((res) => {\r\n      const q = res.data.find((x) => x.id === Number(id));\r\n      if (q) setQuiz(q);\r\n    });\r\n  }, [id]);\r\n\r\n  const handleSubmit = async () => {\r\n    let localScore = 0;\r\n    quiz.data.questions.forEach((q, i) => {\r\n      if (answers[i] === q.correctIndex) localScore++;\r\n    });\r\n    setScore(localScore);\r\n    await axios.post(\"http://localhost:5000/api/attempts\", { quizId: quiz.id, score: localScore });\r\n  };\r\n\r\n  if (!quiz) return <p>Loading quiz...</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>{quiz.title}</h1>\r\n      {quiz.data.questions.map((q, qi) => (\r\n        <div key={qi}>\r\n          <p>{q.question}</p>\r\n          {q.options.map((opt, oi) => (\r\n            <label key={oi}>\r\n              <input\r\n                type=\"radio\"\r\n                name={`q${qi}`}\r\n                value={oi}\r\n                checked={answers[qi] === oi}\r\n                onChange={() => {\r\n                  const copy = [...answers];\r\n                  copy[qi] = oi;\r\n                  setAnswers(copy);\r\n                }}\r\n              />\r\n              {opt}\r\n            </label>\r\n          ))}\r\n        </div>\r\n      ))}\r\n\r\n      <button onClick={handleSubmit}>Submit Quiz</button>\r\n\r\n      {score !== null && (\r\n        <h2>Your score: {score} / {quiz.data.questions.length}</h2>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}